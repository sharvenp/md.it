(function(){"use strict";var e={6733:function(e,t,i){var o=i(9242),l=i(3396);function r(e,t,i,o,r,n){const s=(0,l.up)("EditorV");return(0,l.wg)(),(0,l.j4)(s)}const n={class:"view"},s={class:"row"},a={class:"row"},c={id:"editor-col",class:"p-0 column"},h={id:"view-col",class:"p-0 column",ref:"viewer"},d=["innerHTML"],u={class:"row"};function p(e,t,i,o,r,p){const m=(0,l.up)("TitleBarV"),g=(0,l.up)("codemirror"),v=(0,l.up)("pane"),w=(0,l.up)("splitpanes"),f=(0,l.up)("ToolBarV");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",s,[((0,l.wg)(),(0,l.j4)(m,{key:`${r.titleBarKey}`,changeKey:`${r.titleBarKey}`,modified:r.modified,editorLocked:r.editorLocked,"current-theme":r.currentTheme,isIPCSupported:r.isIPCSupported},null,8,["changeKey","modified","editorLocked","current-theme","isIPCSupported"]))]),(0,l._)("div",a,[(0,l.Wm)(w,{class:"default-theme"},{default:(0,l.w5)((()=>[p.showLeftPane?((0,l.wg)(),(0,l.j4)(v,{key:0},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l.Wm)(g,{modelValue:r.inputText,"onUpdate:modelValue":t[0]||(t[0]=e=>r.inputText=e),style:{width:"100%",height:"100%"},placeholder:"",autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:p.codemirrorExtensions,disabled:r.editorLocked,onReady:o.handleReady,onChange:p.onInputUpdate},null,8,["modelValue","extensions","disabled","onReady","onChange"])])])),_:1})):(0,l.kq)("",!0),p.showRightPane?((0,l.wg)(),(0,l.j4)(v,{key:1},{default:(0,l.w5)((()=>[(0,l._)("div",h,[(0,l._)("div",{innerHTML:p.compiledMarkdown,class:"preview"},null,8,d)],512)])),_:1})):(0,l.kq)("",!0)])),_:1})]),(0,l._)("div",u,[(0,l.Wm)(f,{editorLocked:r.editorLocked,currentLayout:r.currentLayout,spellCheck:r.spellCheck,currentTheme:r.currentTheme,scrollLink:r.scrollLink,isIPCSupported:r.isIPCSupported,onToggleSpellCheck:p.onSpellCheckToggle,onLayoutChange:p.onLayoutChange,onOpenFile:p.onOpenFile,onSaveFile:p.onSaveFile,onSaveAsFile:p.onSaveAsFile,onToggleTheme:p.onThemeToggle,onToggleScrollLink:p.onScrollLinkToggle},null,8,["editorLocked","currentLayout","spellCheck","currentTheme","scrollLink","isIPCSupported","onToggleSpellCheck","onLayoutChange","onOpenFile","onSaveFile","onSaveAsFile","onToggleTheme","onToggleScrollLink"])])])}var m=i(4870),g=i(6159),v=i(1901),w=i(8045),f=i(4814),k=i(5406),b=i(3581),C=i(3812),L=i.n(C),y=i(4982),T=i.n(y),S=i(7632),E=i.n(S),_=i(987),M=i.n(_),I=i(82),x=i.n(I),F=i(8569),A=i.n(F),O=i(3617),V=i.n(O),P=i(7139),D=i.p+"img/icon.8557720e.png";const z={class:"bottom-bar"},B={class:"d-flex align-items-center bottom-flex-bar"},q=["disabled"],Z=(0,l._)("span",null,"Open",-1),$=[Z],H=["disabled"],N=(0,l._)("span",null,"Save",-1),R=[N],W=["disabled"],j=(0,l._)("span",null,"Save As",-1),K=[j],U={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-layout-sidebar",viewBox:"0 0 16 16"},G=(0,l._)("path",{d:"M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm5-1v12h9a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H5zM4 2H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2V2z"},null,-1),X=[G],J={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-layout-sidebar-reverse",viewBox:"0 0 16 16"},Y=(0,l._)("path",{d:"M16 3a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3zm-5-1v12H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h9zm1 0h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-2V2z"},null,-1),Q=[Y],ee={key:2,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-layout-split",viewBox:"0 0 16 16"},te=(0,l._)("path",{d:"M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm8.5-1v12H14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H8.5zm-1 0H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h5.5V2z"},null,-1),ie=[te],oe=["disabled"],le=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-spellcheck",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M8.217 11.068c1.216 0 1.948-.869 1.948-2.31v-.702c0-1.44-.727-2.305-1.929-2.305-.742 0-1.328.347-1.499.889h-.063V3.983h-1.29V11h1.27v-.791h.064c.21.532.776.86 1.499.86zm-.43-1.025c-.66 0-1.113-.518-1.113-1.28V8.12c0-.825.42-1.343 1.098-1.343.684 0 1.075.518 1.075 1.416v.45c0 .888-.386 1.401-1.06 1.401zm-5.583 1.035c.767 0 1.201-.356 1.406-.737h.059V11h1.216V7.519c0-1.314-.947-1.783-2.11-1.783C1.355 5.736.75 6.42.69 7.27h1.216c.064-.323.313-.552.84-.552.527 0 .864.249.864.771v.464H2.346C1.145 7.953.5 8.568.5 9.496c0 .977.693 1.582 1.704 1.582zm.42-.947c-.44 0-.845-.235-.845-.718 0-.395.269-.684.84-.684h.991v.538c0 .503-.444.864-.986.864zm8.897.567c-.577-.4-.9-1.088-.9-1.983v-.65c0-1.42.894-2.338 2.305-2.338 1.352 0 2.119.82 2.139 1.806h-1.187c-.04-.351-.283-.776-.918-.776-.674 0-1.045.517-1.045 1.328v.625c0 .468.121.834.343 1.067l-.737.92z"}),(0,l._)("path",{d:"M14.469 9.414a.75.75 0 0 1 .117 1.055l-4 5a.75.75 0 0 1-1.116.061l-2.5-2.5a.75.75 0 1 1 1.06-1.06l1.908 1.907 3.476-4.346a.75.75 0 0 1 1.055-.117z"})],-1),re=[le],ne={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-layout-sidebar",viewBox:"0 0 16 16"},se=(0,l._)("path",{d:"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"},null,-1),ae=[se],ce={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-layout-sidebar-reverse",viewBox:"0 0 16 16"},he=(0,l._)("path",{d:"M12 8a4 4 0 1 1-8 0 4 4 0 0 1 8 0zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"},null,-1),de=[he],ue=["fill"],pe=(0,l._)("path",{d:"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z"},null,-1),me=[pe],ge=["fill"],ve=(0,l._)("path",{d:"m770-302-60-62q40-11 65-42.5t25-73.5q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 57-29.5 105T770-302ZM634-440l-80-80h86v80h-6ZM792-56 56-792l56-56 736 736-56 56ZM440-280H280q-83 0-141.5-58.5T80-480q0-69 42-123t108-71l74 74h-24q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h65l79 80H320Z"},null,-1),we=[ve],fe={class:"logo ms-auto text-decoration-none noselect",href:"https://github.com/sharvenp/md.it",target:"_blank"},ke={class:"d-flex"},be=(0,l._)("img",{width:"40",class:"p-1",src:D},null,-1),Ce={class:"p-auto m-2"};function Le(e,t,i,r,n,s){return(0,l.wg)(),(0,l.iD)("div",z,[(0,l._)("div",B,[(0,l._)("button",{id:"open-button",type:"button",title:"Open",disabled:i.editorLocked,class:(0,P.C_)(`btn btn-${s.buttonColorClass}`),onClick:t[0]||(t[0]=(...e)=>s.openFile&&s.openFile(...e))},$,10,q),(0,l.wy)((0,l._)("button",{id:"save-button",type:"button",title:"Save",disabled:i.editorLocked,class:(0,P.C_)(`btn btn-${s.buttonColorClass} ms-2`),onClick:t[1]||(t[1]=(...e)=>s.saveFile&&s.saveFile(...e))},R,10,H),[[o.F8,i.isIPCSupported]]),(0,l._)("button",{id:"save-as-button",type:"button",title:"Save As",disabled:i.editorLocked,class:(0,P.C_)(`btn btn-${s.buttonColorClass} ms-2`),onClick:t[2]||(t[2]=(...e)=>s.saveAsFile&&s.saveAsFile(...e))},K,10,W),(0,l._)("button",{type:"button",id:"layout-button",title:"Toggle Layout",class:(0,P.C_)(`btn btn-${s.buttonColorClass} ms-4`),onClick:t[3]||(t[3]=(...e)=>s.cycleLayout&&s.cycleLayout(...e))},[0===i.currentLayout?((0,l.wg)(),(0,l.iD)("svg",U,X)):1===i.currentLayout?((0,l.wg)(),(0,l.iD)("svg",J,Q)):2===i.currentLayout?((0,l.wg)(),(0,l.iD)("svg",ee,ie)):(0,l.kq)("",!0)],2),(0,l._)("button",{id:"spell-check-button",type:"button",title:"Toggle Spellcheck",disabled:i.editorLocked,class:(0,P.C_)(`btn btn-${i.spellCheck?"success":s.buttonColorClass} ms-2`),onClick:t[4]||(t[4]=(...e)=>s.toggleSpellCheck&&s.toggleSpellCheck(...e))},re,10,oe),(0,l._)("button",{type:"button",id:"theme-button",title:"Toggle Theme",class:(0,P.C_)(`btn btn-${s.buttonColorClass} ms-2`),onClick:t[5]||(t[5]=(...e)=>s.toggleTheme&&s.toggleTheme(...e))},[i.currentTheme?((0,l.wg)(),(0,l.iD)("svg",ne,ae)):((0,l.wg)(),(0,l.iD)("svg",ce,de))],2),(0,l._)("button",{type:"button",id:"scroll-link-button",title:"Toggle Scroll Link",class:(0,P.C_)(`btn btn-${s.buttonColorClass} ms-2`),onClick:t[6]||(t[6]=(...e)=>s.toggleScrollLink&&s.toggleScrollLink(...e))},[i.scrollLink?((0,l.wg)(),(0,l.iD)("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",fill:s.svgFill},me,8,ue)):((0,l.wg)(),(0,l.iD)("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24",fill:s.svgFill},we,8,ge))],2),(0,l._)("a",fe,[(0,l._)("div",ke,[be,(0,l._)("p",Ce,(0,P.zw)(n.appVersion),1)])])])])}var ye={i8:"2.0.0"},Te={name:"ToolBarV",props:{currentLayout:Number,spellCheck:Boolean,currentTheme:Boolean,scrollLink:Boolean,editorLocked:Boolean,isIPCSupported:Boolean},data(){return{appVersion:ye.i8}},computed:{buttonColorClass(){return this.currentTheme?"light":"dark"},svgFill(){return this.currentTheme?"black":"white"}},methods:{cycleLayout(){this.$emit("layout-change")},openFile(){this.editorLocked||this.$emit("open-file")},saveFile(){this.editorLocked||this.$emit("save-file")},saveAsFile(){this.editorLocked||this.$emit("save-as-file")},toggleSpellCheck(){this.editorLocked||this.$emit("toggle-spell-check")},toggleTheme(){this.editorLocked||this.$emit("toggle-theme")},toggleScrollLink(){this.editorLocked||this.$emit("toggle-scroll-link")}}},Se=i(89);const Ee=(0,Se.Z)(Te,[["render",Le]]);var _e=Ee;const Me={class:"title-bar"},Ie={class:"d-flex flex-row-reverse title-flex-bar"},xe=["disabled"],Fe=["fill"],Ae=(0,l._)("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"},null,-1),Oe=[Ae],Ve=["disabled"],Pe=["fill"],De=(0,l._)("path",{d:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0 0v-560 560Z"},null,-1),ze=[De],Be=["fill"],qe=(0,l._)("path",{d:"M320-240q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H320Zm0-80h480v-480H320v480ZM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80H160Zm160-720v480-480Z"},null,-1),Ze=[qe],$e=["disabled"],He=["fill"],Ne=(0,l._)("path",{d:"M240-120v-80h480v80H240Z"},null,-1),Re=[Ne],We={key:3,class:"file-name me-auto"};function je(e,t,i,o,r,n){return(0,l.wg)(),(0,l.iD)("div",Me,[(0,l._)("div",Ie,[i.isIPCSupported?((0,l.wg)(),(0,l.iD)("button",{key:0,id:"close-button",type:"button",title:"Close",disabled:i.editorLocked,onClick:t[0]||(t[0]=(...e)=>n.onClose&&n.onClose(...e)),class:(0,P.C_)(`d-flex align-items-center justify-content-center btn btn-${n.buttonColorClass}`)},[((0,l.wg)(),(0,l.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 -960 960 960",width:"20",fill:n.svgFill},Oe,8,Fe))],10,xe)):(0,l.kq)("",!0),i.isIPCSupported?((0,l.wg)(),(0,l.iD)("button",{key:1,id:"fullscreen-button",type:"button",title:"Expand",disabled:i.editorLocked,onClick:t[1]||(t[1]=(...e)=>n.toggleFullScreen&&n.toggleFullScreen(...e)),class:(0,P.C_)(`d-flex align-items-center justify-content-center me-2 btn btn-${n.buttonColorClass}`)},[r.maximized?((0,l.wg)(),(0,l.iD)("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",height:"15",viewBox:"0 -960 960 960",width:"15",fill:n.svgFill,class:"unmaximize-icon"},Ze,8,Be)):((0,l.wg)(),(0,l.iD)("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",height:"15",viewBox:"0 -960 960 960",width:"15",fill:n.svgFill},ze,8,Pe))],10,Ve)):(0,l.kq)("",!0),i.isIPCSupported?((0,l.wg)(),(0,l.iD)("button",{key:2,id:"minimize-button",type:"button",title:"Minimize",disabled:i.editorLocked,onClick:t[2]||(t[2]=(...e)=>n.onMinimize&&n.onMinimize(...e)),class:(0,P.C_)(`d-flex align-items-center justify-content-center me-2 btn btn-${n.buttonColorClass}`)},[((0,l.wg)(),(0,l.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 -960 960 960",width:"20",fill:n.svgFill},Re,8,He))],10,$e)):(0,l.kq)("",!0),i.isIPCSupported?((0,l.wg)(),(0,l.iD)("span",We,(0,P.zw)(r.fileName)+" "+(0,P.zw)(i.modified?"*":""),1)):(0,l.kq)("",!0)])])}const Ke={GET_OPEN_DATA:"GET_OPEN_DATA",SET_MODIFIED:"SET_MODIFIED",OPEN_FILE:"OPEN_FILE",SAVE_FILE:"SAVE_FILE",SAVE_AS_FILE:"SAVE_AS_FILE",GET_PREFERENCES:"GET_PREFERENCES",SET_PREFERENCES:"SET_PREFERENCES",GET_FILENAME:"GET_FILENAME",GET_MAXIMIZED_STATE:"GET_MAXIMIZED_STATE",CLOSE:"CLOSE",MINIMIZE:"MINIMIZE",MAXIMIZE:"MAXIMIZE",UNMAXIMIZE:"UNMAXIMIZE"};var Ue=Ke,Ge={name:"TitleBarV",props:{modified:Boolean,changeKey:String,currentTheme:Boolean,editorLocked:Boolean,isIPCSupported:Boolean},data(){return{fileName:"",maximized:!1}},computed:{buttonColorClass(){return this.currentTheme?"light":"dark"},svgFill(){return this.currentTheme?"black":"white"}},mounted(){this.updateState()},methods:{async ipcCallWrapper(...e){return await(window.ipcRenderer?.call(...e))},async updateState(){this.isIPCSupported&&(this.fileName=await this.ipcCallWrapper(Ue.GET_FILENAME),this.maximized=await this.ipcCallWrapper(Ue.GET_MAXIMIZED_STATE))},async onClose(){this.isIPCSupported&&await this.ipcCallWrapper(Ue.CLOSE)},async toggleFullScreen(){this.isIPCSupported&&(this.maximized?await this.ipcCallWrapper(Ue.UNMAXIMIZE):await this.ipcCallWrapper(Ue.MAXIMIZE))},async onMinimize(){this.isIPCSupported&&await this.ipcCallWrapper(Ue.MINIMIZE)}},watch:{changeKey(){this.updateState()}}};const Xe=(0,Se.Z)(Ge,[["render",je]]);var Je=Xe,Ye={name:"EditorV",components:{Codemirror:g.Z1,TitleBarV:Je,ToolBarV:_e,Splitpanes:b.F,Pane:b.X},data(){return{inputText:"",titleBarKey:"",modified:!1,currentLayout:2,currentTheme:!1,scrollLink:!0,spellCheck:!1,editorLocked:!1,fileOpened:!1,renderer:void 0,md:void 0,scrollMap:void 0,scrollLock:[!1,!1],isIPCSupported:!1}},setup(){let e=(e,t,i)=>{let o=({state:e,dispatch:t})=>{const o=e.changeByRange((t=>{const o=e.sliceDoc(t.from-i.length,t.from)===i,l=e.sliceDoc(t.to,t.to+i.length)===i,r=[];r.push(o?{from:t.from-i.length,to:t.from,insert:w.xv.of([""])}:{from:t.from,insert:w.xv.of([i])}),r.push(l?{from:t.to,to:t.to+i.length,insert:w.xv.of([""])}:{from:t.to,insert:w.xv.of([i])});const n=o?-i.length:i.length,s=l?-i.length:i.length;return{changes:r,range:w.jT.range(t.from+n,t.to+s)}}));return t(e.update(o,{scrollIntoView:!0,annotations:w.YW.userEvent.of("input")})),!0};return[{key:`${e}-${t.toUpperCase()}`,run:o},{key:`${e}-${t.toLowerCase()}`,run:o}]};const t=(0,m.XI)(),i=e=>{t.value=e.view},o=[(0,f.JH)(),v.tk.lineWrapping,v.$f.of([...e("Mod","b","**"),...e("Mod","e","_"),...e("Mod","k","`"),...e("Mod-Shift","d","~~")])];return{extensions:o,handleReady:i,codemirrorView:t}},computed:{compiledMarkdown:function(){return V().sanitize(this.md?.render(this.inputText)??"")},showLeftPane(){return 1===this.currentLayout||2===this.currentLayout},showRightPane(){return 0===this.currentLayout||2===this.currentLayout},codemirrorExtensions(){return this.currentTheme?this.extensions:[...this.extensions,k.vk]}},created(){this.isIPCSupported=void 0!==window.ipcRenderer&&null!==window.ipcRenderer},async beforeMount(){let e=await this.ipcCallWrapper(Ue.GET_OPEN_DATA);void 0!==e&&void 0!==e[1]&&(this.inputText=e[0],this.fileOpened=!1,this.modified=!1,this.ipcCallWrapper(Ue.SET_MODIFIED,!1,this.inputText));let t=await this.getPreferences();this.currentLayout=t?.currentLayout??2,this.spellCheck=t?.spellCheck??!1,this.currentTheme=t?.currentTheme??!1,this.scrollLink=t?.scrollLink??!0,this.updateSpellCheck(),this.updateTheme(),this.setupListeners()},mounted(){this.md=new(L())({linkify:!0}).use(E()).use(T()).use(x()).use(A()).use(M(),{disabled:!1}),V().addHook("afterSanitizeAttributes",(function(e){"target"in e&&e.setAttribute("target","_blank")}))},methods:{async ipcCallWrapper(...e){return await(window.ipcRenderer?.call(...e))},setupListeners(){document.onkeydown=async e=>{let t=!1;e.ctrlKey&&("KeyO"===e.code?(await this.onOpenFile(),t=!0):"KeyS"===e.code?e.shiftKey?(await this.onSaveAsFile(),t=!0):(await this.onSaveFile(),t=!0):"Tab"===e.code&&(document.getElementById("open-button").focus(),t=!0)),t&&e.preventDefault()},addEventListener("resize",(()=>{this.titleBarKey=Math.random().toString(),this.scrollMap=void 0})),this._setupScrollEventListeners()},_setupScrollEventListeners(){let e=e=>{this.scrollLock[0]||this.syncEditorScroll(e)},t=e=>{this.scrollLock[1]||this.syncViewerScroll(e)};this.$refs.viewer?.removeEventListener("scroll",e),this.codemirrorView.scrollDOM?.removeEventListener("scroll",t),this.$refs.viewer?.addEventListener("scroll",e,!1),this.codemirrorView.scrollDOM?.addEventListener("scroll",t,!1)},resetScroll(){this.scrollLock=[!0,!0];let e=this.$refs.viewer;e&&e.scrollTo({top:0,behavior:"instant"});let t=this.codemirrorView.scrollDOM;t&&t.scrollTo({top:0,behavior:"instant"}),setTimeout((()=>{this.scrollLock=[!1,!1]}),50)},buildScrollMap(){let e=this.codemirrorView.scrollDOM,t=this.$refs.viewer;if(!e||!t)return;let i=t.scrollTop-t.offsetTop,o=new Array(this.codemirrorView.state.doc.lines).fill(0),l=this.codemirrorView.state.doc.children.map((e=>e.text)).flat(1);l.forEach(((e,t)=>{if(0===t)return void(o[t]=0);if(0===e.length)return void(o[t]=o[t-1]+1);let l=document.querySelector(`[data-source-line="${t}"]`)?.offsetTop;o[t]=void 0!==l?Math.floor(l+i):o[t-1]+1})),this.scrollMap=o},syncEditorScroll(e){if(e&&!e.target.matches(":hover")||!this.scrollLink)return;this.scrollMap||this.buildScrollMap();let t,i=this.$refs.viewer,o=this.codemirrorView.scrollDOM;if(!i||!o||this.scrollMap.length<1)return;let l=Number.MAX_VALUE,r=document.querySelectorAll("[data-source-line]");for(let s=0;s<r.length;s++){let e=Math.abs(r[s].getBoundingClientRect().top);e<l&&(l=e,t=r[s])}let n=parseInt(t?.dataset.sourceLine??0);o.scrollTo({top:n*this.codemirrorView.defaultLineHeight,behavior:"smooth"}),this.scrollLock[1]=!0,setTimeout((()=>{this.scrollLock[1]=!1}),200)},syncViewerScroll(e){if(e&&!e.target.matches(":hover")||!this.scrollLink)return;this.scrollMap||this.buildScrollMap();let t=this.$refs.viewer,i=this.codemirrorView.scrollDOM;if(!t||!i)return;let o=this.codemirrorView.lineBlockAtHeight(i.scrollTop).from,l=this.codemirrorView.state.doc.lineAt(o).number;t.scrollTo({top:this.scrollMap[l-1],behavior:"smooth"}),this.scrollLock[0]=!0,setTimeout((()=>{this.scrollLock[0]=!1}),200)},onInputUpdate(){this.fileOpened?(this.fileOpened=!1,this.modified=!1,this.ipcCallWrapper(Ue.SET_MODIFIED,!1,this.inputText)):(this.modified=!0,this.ipcCallWrapper(Ue.SET_MODIFIED,!0,this.inputText)),this.scrollMap=void 0},async onOpenFile(){if(!this.editorLocked){if(this.editorLocked=!0,this.isIPCSupported){let e=await this.ipcCallWrapper(Ue.OPEN_FILE);void 0!==e&&(this.fileOpened=!0,this.inputText=e,this.resetScroll(),this.scrollMap=void 0)}else{let e=document.createElement("input");e.type="file",e.accept=".txt,.md",e.style.display="none",e.onchange=()=>{let t=Array.from(e.files);if(t.length>0){let i=t[0],o=new FileReader;o.readAsText(i),o.onload=()=>{this.fileOpened=!0,this.inputText=o.result,this.resetScroll(),this.scrollMap=void 0,this.titleBarKey=Math.random().toString(),this.modified=!1,this.editorLocked=!1},e.remove()}},e.oncancel=()=>{this.modified=!1,this.editorLocked=!1},e.click()}this.isIPCSupported&&(this.titleBarKey=Math.random().toString(),this.modified=!1,this.editorLocked=!1)}},async onSaveFile(){if(!this.editorLocked){if(this.editorLocked=!0,this.isIPCSupported){let e=await this.ipcCallWrapper(Ue.SAVE_FILE,this.inputText);2===e?(this.editorLocked=!1,await this.onSaveAsFile()):0===e&&(this.modified=!1,this.ipcCallWrapper(Ue.SET_MODIFIED,!1))}else this.editorLocked=!1,this.onSaveAsFile();this.editorLocked=!1}},async onSaveAsFile(){if(!this.editorLocked){if(this.editorLocked=!0,this.isIPCSupported){let e=await this.ipcCallWrapper(Ue.SAVE_AS_FILE,this.inputText);0===e&&(this.modified=!1,this.ipcCallWrapper(Ue.SET_MODIFIED,!1,this.inputText))}else{let e=new Blob([this.inputText],{type:"text/plain"}),t="file.md",i=document.createElement("a");i.download=t,i.innerHTML="Download File",i.style.display="none",null!=window.webkitURL?i.href=window.webkitURL.createObjectURL(e):(i.href=window.URL.createObjectURL(e),i.onclick=()=>{i.remove(),this.editorLocked=!1},document.body.appendChild(i)),i.click()}this.editorLocked=!1}},onLayoutChange(){this.currentLayout=(this.currentLayout+1)%3,2===this.currentLayout?(this.$nextTick((()=>{this._setupScrollEventListeners(),this.scrollLock=[!1,!1],this.scrollLink&&this.syncViewerScroll()})),this.syncViewerScroll()):this.currentLayout>0&&this.$nextTick((()=>{this.updateSpellCheck()})),this.updatePreferences()},onSpellCheckToggle(){this.spellCheck=!this.spellCheck,this.updateSpellCheck(),this.updatePreferences()},onThemeToggle(){this.currentTheme=!this.currentTheme,this.updateTheme(),this.updatePreferences()},onScrollLinkToggle(){this.scrollLink=!this.scrollLink,this.scrollLink&&this.syncViewerScroll(),this.updatePreferences()},updateSpellCheck(){let e=this.codemirrorView.contentDOM;e&&(e.spellcheck=this.spellCheck)},updateTheme(){this.currentTheme?document.documentElement.className="light-theme":document.documentElement.className="dark-theme"},async getPreferences(){return this.isIPCSupported?await this.ipcCallWrapper(Ue.GET_PREFERENCES):JSON.parse(localStorage?.getItem("preferences"))},updatePreferences(){let e={currentLayout:this.currentLayout,spellCheck:this.spellCheck,currentTheme:this.currentTheme,scrollLink:this.scrollLink};this.isIPCSupported?this.ipcCallWrapper(Ue.SET_PREFERENCES,e):localStorage?.setItem("preferences",JSON.stringify(e))}}};const Qe=(0,Se.Z)(Ye,[["render",p]]);var et=Qe,tt={name:"App",components:{EditorV:et}};const it=(0,Se.Z)(tt,[["render",r]]);var ot=it;i(8937);const lt=(0,o.ri)(ot);lt.mount("#app")}},t={};function i(o){var l=t[o];if(void 0!==l)return l.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,o,l,r){if(!o){var n=1/0;for(h=0;h<e.length;h++){o=e[h][0],l=e[h][1],r=e[h][2];for(var s=!0,a=0;a<o.length;a++)(!1&r||n>=r)&&Object.keys(i.O).every((function(e){return i.O[e](o[a])}))?o.splice(a--,1):(s=!1,r<n&&(n=r));if(s){e.splice(h--,1);var c=l();void 0!==c&&(t=c)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[o,l,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p="/md.it/"}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,r,n=o[0],s=o[1],a=o[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(l in s)i.o(s,l)&&(i.m[l]=s[l]);if(a)var h=a(i)}for(t&&t(o);c<n.length;c++)r=n[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(h)},o=self["webpackChunkmd_it"]=self["webpackChunkmd_it"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=i.O(void 0,[998],(function(){return i(6733)}));o=i.O(o)})();
//# sourceMappingURL=app.515bd43b.js.map